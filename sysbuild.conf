# SPDX-License-Identifier: MIT
#
# Sysbuild-level configuration for madi-nrf52.
#
# In NCS sysbuild, SB_CONFIG_* symbols are processed at the sysbuild level
# and propagated automatically to the relevant sub-images (e.g., MCUboot).

# Enable MCUboot bootloader
SB_CONFIG_BOOTLOADER_MCUBOOT=y

# Signature algorithm: ECDSA P-256 (matches secrets/dfu_signing_dev.key)
# Propagated to MCUboot as CONFIG_BOOT_SIGNATURE_TYPE_ECDSA_P256.
SB_CONFIG_BOOT_SIGNATURE_TYPE_ECDSA_P256=y

# Swap mode: move-based swap between internal Slot 0 and external Slot 1.
# Supports rollback: MCUboot reverts if the app does not confirm the update.
# Propagated to MCUboot as CONFIG_BOOT_SWAP_USING_MOVE.
SB_CONFIG_MCUBOOT_MODE_SWAP_USING_MOVE=y

# Place MCUboot secondary slot on external QSPI NOR flash (MX25R1635F).
# Required alongside pm_static.yml which defines the physical layout.
# Enables correct MCUboot and app-level flash driver configuration for OTA.
SB_CONFIG_PM_EXTERNAL_FLASH_MCUBOOT_SECONDARY=y

# Signing key: set via sysbuild.cmake using an absolute path.
# Relative paths in sysbuild.conf are resolved from the west workspace root,
# not the application directory, so the absolute path is set in sysbuild.cmake.
