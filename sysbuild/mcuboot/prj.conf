#
# SPDX-License-Identifier: MIT
#
# MCUboot base configuration for madi-nrf52.
# Loaded automatically by NCS sysbuild as the MCUboot image's prj.conf.
#
# This follows the official NCS Matter sample template structure:
#   samples/matter/template/sysbuild/mcuboot/prj.conf
#
# Signature type and swap mode are propagated from sysbuild.conf
# (SB_CONFIG_BOOT_SIGNATURE_TYPE_ECDSA_P256, SB_CONFIG_MCUBOOT_MODE_SWAP_USING_MOVE)
# and must NOT be duplicated here.
#
# Board-specific flash driver settings are in:
#   sysbuild/mcuboot/boards/madi_nrf52840.conf

CONFIG_MAIN_STACK_SIZE=10240

CONFIG_BOOT_SWAP_SAVE_ENCTLV=n
CONFIG_BOOT_BOOTSTRAP=n
CONFIG_PM=n

CONFIG_FLASH=y
CONFIG_FPROTECT=y

# Size optimizations â€” disable unused subsystems
CONFIG_CBPRINTF_NANO=y
CONFIG_PRINTK=n
CONFIG_CONSOLE=n
CONFIG_SERIAL=n
CONFIG_UART_CONSOLE=n
CONFIG_USE_SEGGER_RTT=n
CONFIG_GPIO=n

# Slot sector count: 976 KiB / 4 KiB (MX25R1635F erase unit) = 244 + headroom
CONFIG_BOOT_MAX_IMG_SECTORS=256

CONFIG_LOG=n
CONFIG_CONSOLE_HANDLER=n
CONFIG_BOOT_BANNER=n
CONFIG_NCS_BOOT_BANNER=n
CONFIG_TIMESLICING=n
CONFIG_RESET_ON_FATAL_ERROR=n
CONFIG_MULTITHREADING=n
CONFIG_TICKLESS_KERNEL=n
CONFIG_TIMEOUT_64BIT=n
CONFIG_NRF_ENABLE_ICACHE=n
CONFIG_SIZE_OPTIMIZATIONS=y

# Link-time optimization
CONFIG_LTO=y
CONFIG_ISR_TABLES_LOCAL_DECLARATION=y
